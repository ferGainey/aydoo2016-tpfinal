Este es el repositorio de Fernando Gainey para el trabajo práctico final de la materia AyDOO.

#TP FINAL


#Decisiones de diseño

* En principio había pensado en que cada tipo de ObjetoEspacial conozca el resultado de cuando choca con otro, pero esa solución quedó descartada cuando analicé qué pasaba si agrego algún nuevo tipo de ObjetoEspacial. Al hacer eso tendría que modificar todos los tipos de ObjetoEspacial indicándole qué hacer si les dicen que choquen con ese ObjetoEspacial nuevo. Y esto no me pareció la mejor solución. Además esa solución podría traer problemas de inconsistencias, por ejemplo se agrega un nuevo tipo Meteorito, entonces puede ser que la Nave lo haya agregado pero el Asteroide no. Entonces cuando la Nave quiera chocar con el Meteorito va a saber qué hacer, pero el Asteroide no va a reconocer qué hacer. Por lo tanto busqué algún patrón de diseño que me ayude a resolver mi problema, el que más se se acercaba, en mi opinión, es el patrón Mediator (se tomó la idea de ese patrón), que define un objeto que encapsula cómo interactúa un conjunto de objetos. Este patrón me hace perder acoplamiento entre las clases haciendo que dicho conjunto de objetos no estén referenciados entre ellos explícitamente. Esto me permite variar su interacción de manera independiente. Es decir que los distintos tipos de ObjetoEspacial usan al Mediator para enviar mensajes entre ellos, en este caso el mensaje sería indicar que estoy chocando a otro ObjetoEspacial, y el Mediator lo resuelve. El Mediator sería la clase Choque en mi diseño.
 Si yo quiero agregar un nuevo ObjetoEspacial se lo tengo que avisar solamente a la clase Choque, y los otros ObjetoEspacial no sufren cambios. En mi caso el Mediator va a tener una "matriz" similar a la mostrada en el enunciado (con los valores presentados puestos por defecto), y cuando yo le diga al Mediator que agrego un nuevo tipo de ObjetoEspacial, este simplemente agrega una fila y columna correspondiente a ese objeto, y por defecto su efecto al interaccionar con otros es nula (este método lo borré, ya que para probarlo debía agregar un nuevo tipo de ObjetoEspacial, que no exista en el dominio inicial). Si yo quiero cambiar algún tipo de efecto de alguna interacción (choque), va a haber un método que me lo permita hacer, por lo tanto no tengo que tocar código que hice anteriormente (cumpliendo con el Principio Open/Closed).

* Los efectos que sufren los objetos que chocan estan modelados en clases hijas de Efecto, cada clase hija determina un comportamiento en particular. Los efectos están asociados a algún choque (similar al cuadro de ejemplo recibido en la consigna).

* Cuando se produce algún choque, es indiferente quien lo realiza a la hora de determinar cuál es el efecto que sufre cada objeto. En otras palabras, si A choca a B (A.chocar(B)) se van a producir los mismos efectos que si sucediera que B choque a A (B.chocar(A)).

* Se modelaron las siguientes Excepciones para manejar diversas situaciones: DestruccionNegativaException, MasaNoPositivaException, ObjetoGenericoException, ObjetoMuertoException y VidaNoPositivaException.

* Los distintos tipos de ObjetoEspacial van a quedar sin comportamiento, ya que como expliqué antes, de los choques se va a encargar una clase Choque que va a saber qué hacer, y por otro lado todo el comportamiento en común que tienen los distintos tipos de objetos espaciales están en una clase padre llamada ObjetoEspacial. Entonces de momento no les queda ningún comportamiento. Al hacerme ruido esto, me surgió la idea de que tal vez esas clases podrían no existir, y que su tipo se indique con un String por el constructor, pero esa idea quedo descartada por dos motivos principalmente: Primero es que en mi consideración los distintos tipos de objetos espaciales son parte del dominio, por lo que deben estar. Segundo, que está encadenado con el motivo anterior, es que si en algún momento quiero agregarle un comportamiento a un tipo de objeto espacial en particular, que en mi opinión es muy probable que pueda pasar (por ej. agregar o cambiar un piloto a la Nave), entonces la solución de pasarle el objeto espacial que va a ser creado por un String en el constructor no va a soportar dicho cambio, es decir que no lo voy a poder extender sin tocar lo que ya hice, por lo que estaría violando con el principio Open/Closed.

##Comentario sobre el diagrama de secuencia
Notar que los objetos espaciales generador y receptor de choque son Nave y Misil, estos fueron elegidos aleatoriamente para representar la situación de choque. El motivo por el cual no puse simplemente un objeto del tipo ObjetoEspacial es que ObjetoEspacial es un objeto genérico que contiene el comportamiento en común de los distintos tipos de ObjetoEspacial (Nave, Misil, Bomba, Asteroide y Estrella). Y como es un objeto genérico, no debe poder chocar con otro objeto. Incluso hay puesta una excepción de que si uno de los dos objetos que interactúan es un ObjetoEspacial (y no un tipo específico), entonces lanza una excepción.
